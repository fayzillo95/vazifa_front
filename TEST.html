<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./css/tilewend.css">
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/display.css">
    <style>
        .none-disp {
            display: none;
        }

        /* Overlay */
        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            /* Menudan past, lekin boshqa hammasidan ustun */
        }

        /* Menu */
        .menu-panel {
            position: fixed;
            top: 100px;
            right: -250px;
            width: 250px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 8px rgba(0, 0, 0, 0.2);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            transition: right 0.3s ease;
            z-index: 1000;
        }

        .menu-panel.show {
            right: 0;
        }

        #overlay.show {
            display: block;
        }
    </style>
</head>

<body>

    <header>
        <section id="header-section">
            <div class="container flex item-center m-auto justify-betwen">
                <div class="flex item-center justify-ceter logo">
                    <img src="./img/site logo.svg" alt="">
                </div>

                <nav id="head-nav-list" class="flex item-center justify-ceter header-nav gap-30">
                    <span class="nav-item">Home</span>
                    <span class="nav-item">Shop</span>
                    <span class="nav-item">Product</span>
                    <span class="nav-item">Pages</span>
                </nav>

                <div id="head-icons" class="flex item-center justify-ceter header-icons gap-30">
                    <i class="fa fa-search" aria-hidden="true"></i>
                    <i class="fa fa-user" aria-hidden="true"></i>
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-shopping-bag" aria-hidden="true"></i>
                </div>
                <i id="menu-btn" class="fa fa-bars" aria-hidden="true"></i>
            </div>

            <!-- Overlay -->
            <div id="overlay"></div>

            <!-- Menu -->
            <div id="menu" class="none-disp menu-panel"></div>
        </section>
    </header>

    <script>
        const navList = document.getElementById("head-nav-list");
        const iconList = document.getElementById("head-icons");
        const menuBtn = document.getElementById("menu-btn");
        const menu = document.getElementById("menu");
        const overlay = document.getElementById("overlay");
        const headerSection = document.getElementById("header-section");

        const breakpoints = [
            { width: 768, element: navList.children[3] },
            { width: 650, element: navList.children[2] },
            { width: 520, element: navList.children[1] },
            { width: 450, element: navList.children[0] },
            { width: 368, element: iconList.children[0] },
            { width: 318, element: iconList.children[1] }
        ];

        function updateMenu() {
            const width = window.innerWidth;

            breakpoints.forEach(bp => {
                if (!bp.element) return;
                if (width <= bp.width) {
                    if (!menu.contains(bp.element)) {
                        menu.appendChild(bp.element);
                    }
                } else {
                    if (bp.element.classList.contains("nav-item")) {
                        navList.appendChild(bp.element);
                    } else {
                        iconList.appendChild(bp.element);
                    }
                }
            });

            if (width <= 992) {
                headerSection.style.marginLeft = "25px";
                headerSection.style.marginRight = "25px";
                menuBtn.style.display = "block";
            } else {
                menuBtn.style.display = "none";
                menu.classList.remove("show");
                overlay.classList.remove("show");
            }

            if (!menu.children[0] && menu.classList.contains("show")) {
                menu.classList.remove("show");
                overlay.classList.remove("show");
            }
        }

        menuBtn.addEventListener("click", () => {
            if (menu.children[0]) {
                menu.classList.toggle("show");
                overlay.classList.toggle("show");
            } else {
                alert("Kechirasiz menu bo'sh ekan ðŸ™„");
            }

        });

        overlay.addEventListener("click", () => {
            menu.classList.remove("show");
            overlay.classList.remove("show");
        });

        window.addEventListener("resize", updateMenu);
        updateMenu();
    </script>

</body>

</html>